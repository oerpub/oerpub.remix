<metal:use use-macro="base">

<metal:script-slot fill-slot="script-slot">
<script type="text/javascript">
    var nextSelectValue = 2;
    var newInput;
    $(document).ready(function(){
      $("#add-more-questions").click(function(){
      			var num     = $('#add-more-questions').length;
            var newNum  = new Number(num + 1);
            var questionId = '#question-'+num;
            console.log(questionId);
            var optionId = '#options-'+num;
            var solutionId = '#solution-'+num;
            
            var newQuestionBox = $('#add-questions-area-' + num).clone().attr('id', 'add-questions-area-' + newNum);
            
            var replaceName = newQuestionBox.find(questionId).attr('name','question-'+newNum);
            var replaceId = newQuestionBox.find(questionId).attr('id','question-'+newNum);
            
            var replaceName = newQuestionBox.find(optionId).attr('name','options-'+newNum);
            var replaceId = newQuestionBox.find(optionId).attr('id','options-'+newNum);
            
            var replaceName = newQuestionBox.find(solutionId).attr('name','solution-'+newNum);
            var replaceId = newQuestionBox.find(solutionId).attr('id','solution-'+newNum);
           $('#add-questions-area-' + num).after(newQuestionBox);
			
            

      });
    });

</script>
}    
</metal:script-slot>

    <metal:workflownav fill-slot="workflownav">
   
    <div id="workflownav-wrap">
        <div id="workflownav-container">
            <div id="back-steps">
                <input type="button" class="button" 
                    value="&laquo; Back: Choose Location" id="back-to-chooser"
                    url="${request.route_url('importer')}"
                    title="Return to the choose import option">
            </div>
           <div id="forward-steps">
           
                <input id="options-submit"
                class="button forward-button"
                name="form.submitted"
                type="submit"
                value="Next: Describe Your Presentation &#187;"                 
                title="Add/edit metadata"/>
            </div>
        </div>
    </div>
    
    </metal:workflownav>

    <metal:content-slot fill-slot="content-slot">
    <div id="ie6-container-wrap">
        <div id="container">
            <div id="content">
                <div id="pageheader-wrap">

                    <div id="page-title">
                        <h1>
                            Enhance your presentation:
                            <span class="metatitle">
                                
                            </span>
                        </h1>
                    </div>

                    <div id="page-description">
                        <p class="forminfo">
                          <p tal:condition="embed_google">
                          Your uploaded Presentation as uploaded to Google Docs.
                          <br/><br/>
                            <iframe src="https://docs.google.com/presentation/embed?id=${google_resource_id}&start=false&loop=false&delayms=3000" 
                                frameborder="0" width="1058" height="823" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true">
                      		</iframe>
                          </p>
                          <p tal:condition="embed_slideshare">
	            						  Your uploaded Presentation as uploaded to SlideShare.
							               <br/><br/>
							               <p tal:condition="show_iframe">
							               
												<iframe src="http://www.slideshare.net/slideshow/embed_code/${slideshare_id}" 
													width="425" height="355" frameborder="0" marginwidth="0" marginheight="0" 
													scrolling="no" style="border:1px solid #CCC;border-width:1px 1px 0" allowfullscreen>
												</iframe>
										  </p>
										  <p tal:condition="not_converted">
											<p>
												Your slides are being uploaded to Slideshare (or Google Docs).
												You will receive an email once they are ready. 
												In the mean time, you can enhance it with an introduction and a quiz.
											</p>
											
										  </p>
										  
										  
                          </p>
                        </p>
                    </div>

                </div>

                <script type="text/javascript">
                    function ForcePreviewReload () {
                        var src = jQuery('iframe#preview-frame.preview').attr('src');
                        jQuery('iframe#preview-frame.preview').attr('src', src);
                    }
                </script>
                ${form.begin(request.route_url('slideshow_preview'), id='optionsform')}
                ${form.csrf_token()}
                <span>
                  <span>
                    <div class="formlabel">Introductory paragraph</div>
                    <div class="forminfo">You can use the text box below to orient your readers before they start watching the presentation</div>
                    <div class="formfield">
                      <textarea name="introductory_paragraphs" rows="6" cols="100"></textarea>
                  </div>
                </span>

                <ul id="all-questions">
                <div class="formlabel">Add a Quiz</div>
                <div class="forminfo">To help readers retain the important information from your slides, you can add a simple quiz below</div>
                
					<li id="add-questions-area-1">
                      <div class="formlabel">Question </div>
                      <div class="forminfo">Question</div>
                      <div class="formfield">
                          <input type="text" size="100" name="question-1" id="question-1">                          
                      </div>                                         
                      <div class="formlabel">Options </div>
                      <div class="forminfo">Options one on on line</div>
                      <div class="formfield">
                          <textarea name="options-1" rows="5" cols="40" id="options-1"></textarea>                          
                      </div>
                      
                      <div class="formlabel">Solution </div>
                      <div class="forminfo">Solution</div>
                      <div class="formfield">
                          <textarea name="solution-1" rows="5" cols="40" id="solution-1"></textarea>                          
                      </div>
                      
			          	</li>
      				</ul>
				        <input class="button" id="add-more-questions" value="Add More Questions" type="button">
                <!--<input class="button" id="options-submit" name="form.submitted" value="Upload to Cnx" type="submit">-->
                  
                </span>
                ${form.end()}
                
                

            </div>
        </div>
    </div>
    
    </metal:content-slot>

    <metal:footer-slot fill-slot="footer-slot" />
</metal:use>
