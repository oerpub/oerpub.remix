<metal:use use-macro="base">

<metal:script-slot fill-slot="script-slot">

    <link rel="stylesheet" type="text/css" href="${request.application_url}/aloha/src/css/aloha.css"> <!-- xhtml workaround --></link>
    <link rel="stylesheet" href="${request.application_url}/aloha/bootstrap/css/bootstrap.css" type="text/css"> <!-- xhtml workaround --></link>
    <link rel="stylesheet" href="${request.application_url}/aloha/bootstrap/css/bootstrap-responsive.css" type="text/css"> <!-- xhtml workaround --></link>
    <link rel="stylesheet" type="text/css" href="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/html5_content_in_oerpub.css')}"> <!-- xhtml workaround --></link>
    <script type="text/javascript" src="${request.application_url}/aloha/src/lib/require.js"> <!-- xhtml workaround --></script>
    <script src="${request.static_url('oerpub.rhaptoslabs.swordpushweb:static/aloha-settings.js')}"> <!-- xhtml workaround --></script>
    <script src="${request.application_url}/aloha/bootstrap/js/bootstrap.js"> <!-- xhtml workaround --></script>

<script type="text/javascript">

    $(document).ready(function(){
            $("#header h1 a").unbind('click');
            $('#url-submit').attr('disabled','disabled');
            $('#url_text').live('paste change keyup', function(){
                if($(this).val() != ''){
                $('#url-submit').removeAttr('disabled');
                }
                else {
                $('#url-submit').attr('disabled','disabled');
                }
                });
            });

</script>
}    
</metal:script-slot>

<metal:workflownav fill-slot="workflownav" />

<tal:body metal:fill-slot="content-slot"
tal:define="images_url request.static_url('oerpub.rhaptoslabs.swordpushweb:static/images')">
<div id="ie6-container-wrap">
    <div id="container">
        <div id="content">

            <div class="pleasewait" id="upload-wait" style="display: none;">
                Your document is being processed. This may take a few moments.
            </div>

            <div id="choose-upload">
              <h1>
                Create, edit, and adapt content in Connexions
              </h1>
              <p class="forminfo">
                Choose one of the following to import the contents of a new or existing module. 
              </p>

              ${form.begin(request.route_url('choose'), multipart='multipart', id='uploadform')}
              ${form.csrf_token()}

            <table style="width: 100%; border-collapse: collapse; border-width: 0;">
              <tbody>
                <tr>
                  <td style="vertical-align: top; padding-right: 2em; width: 60%;">

                    <h3>Importer tools</h3>

                    <ul class="create-new-list">

                        <li id="editor">
                            <label>
                                <span style="visibility: hidden; display: none;" class="or-bullet">or</span> 
                                <span class="label-text">
                                    <img src="${images_url}/module_icon.gif"> <strong>Module editor</strong>
                                </span>
                            </label>
                            <div class="upload-form" style="width: 556px; ">
                                <input class="btn"
                                    value="Edit a new or existing module »"
                                    href="#neworexisting"
                                    role="button"
                                    class="btn"
                                    data-toggle="modal"
                                    type="button" 
                                    id="show-neworexisting">
                            </div>
                        </li>

                        <li id="doc-importer">
                            <!-- div style="margin: 0 0 1em -1.5em;">
                                <strong>Or use one of our importer tools:</strong>
                            </div -->                            
                            <label>
                                <span style="visibility: hidden;" class="or-bullet">or</span> 
                                <span class="label-text">
                                    <img src="${images_url}/word-icon.gif"> <strong>Microsoft Word</strong> or 
                                    <img src="${images_url}/oo-icon.gif"> <strong>Open Office</strong>
                                </span>
                            </label>

                            <div class="upload-form">
                                <input id="file-submit"
                                    class="btn"
                                    role="button"
                                    value="Choose file and preview &#187;"
                                    name="form.submitted"
                                    type="submit">
                                
                                <input id="upload" name="upload" style="visibility: hidden;" type="file" />
                                <input id="newmodule" name="newmodule" value="" type="hidden" />
                            </div>
                        </li>

                        <li id="gdoc-importer">
                            <label>
                                <span class="label-text">
                                    <img src="${images_url}/google-docs-22.png">
                                </span>
                            </label>

                            <div class="upload-form">
                                ${form.hidden('gdocs_resource_id', value=None, id='gdocs_resource_id')} ${form.hidden('gdocs_access_token', value=None, id='gdocs_access_token')}
                                <input id="google-submit"
                                    type="submit"
                                    class="btn" 
                                    name="form.submitted"
                                    value="Select and preview &#187;">
                            </div>
                        </li>
                          <li id="url-importer">
                            <label>
                              <span class="label-text">
                                <img src="${images_url}/url-icon-01.png"/>
                                <strong>URL</strong> <span style="font-weight: normal;">(for converting an Internet page)</span>
                              </span>
                            </label>

                            <div class="upload-form">
                                <input id="url_text" name="url_text" style="width: 30em;"
                                    placeholder="http://www.example.com" type="url" 
                                    onkeydown="keyDown(event)" />

                                <input class="btn"
                                    id="url-submit"
                                    name="url.submitted"
                                    value="Convert and preview &#187;"
                                    disabled="disabled"
                                    type="submit">
                            </div>
                        
                          </li>

                    </ul>

                      <div class="advanced" style="display: block;">
                        <h2 class="advanced-label">
                          Advanced
                        </h2>
                        <ul class="create-new-list">
                          <li id="latex-zip-importer">
                            <label>
                              <span class="or-bullet">or</span> 
                              <span class="label-text">
                                  <img src="${images_url}/zip-icon-01.png"> <strong>Module ZIP</strong> or 
                                  <img src="${images_url}/tex-icon-01.png"> <strong>LaTeX</strong>
                              </span>
                            </label>
                            <div class="upload-form">
                              <p class="forminfo">
                                Convert a LaTeX document or a module's previously downloaded ZIP.
                              </p>
                              <input class="button" id="file-submit" name="form.submitted" value="Choose file and preview &#187;" type="submit">
                            </div>
                          </li>
                        </ul>
                      </div>

                  </td>
                </tr>
              </tbody>
            </table>
            ${form.end()}

              <div class="pleasewait" id="upload-wait" style="display: none;">
                Your document is being processed. This may take a few moments.
              </div>
            </div>

        </div>
    </div>
</div>

${form.begin(request.route_url('choose'), multipart='multipart', id='neworexisting-form')}
${form.csrf_token()}
<div id="neworexisting" class="modal hide fade" tabindex="-1" role="dialog"
    aria-labelledby="New or existing" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="neworexistingLabel">
            Work on a brand new module, starting from scratch.
        </h3>
    </div>
    <div class="modal-body">
        <div class="forminfo" style="margin: .5em 0 1em;">
            <input id="upload" name="upload" type="hidden" />
            <input id="newmodule" name="newmodule" value="newmodule" type="hidden" />
            <button class="btn btn-primary submit-neworexisting"
                value="newmodule"
                url="${request.route_url('choose')}">
                New module
            </button><br/>
            This is an entirely new module. 
        </div>
        <div class="forminfo" style="margin: .5em 0 1em;">
            <button class="btn btn-primary submit-neworexisting" 
                url="${request.route_url('choose-module')}">
                Existing module
            </button><br/>
            Choose an existing module to apply your import to, replacing its contents.  
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    </div>
</div>
${form.end()}

<iframe id="login-frame" class="hidden" src="${request.route_url('cnxlogin')}"
    frameborder="0" marginheight="0" marginwidth="0" noresize scrolling="auto">
</iframe>

</tal:body>

</metal:use>
