<tal:modules_list metal:define-macro="modules_list"
    tal:define="images_url request.static_url('oerpub.rhaptoslabs.swordpushweb:static/images');
    b_size python:modules.size;
    b_start python:modules.start + b_size;
    previous_b_start python:modules.start - b_size;">

    <div id="modules-list">
        <!-- Navigation -->
        <div class="listingBar">

            <span class="previous">
                <a href="[url]?b_start=0"
                    tal:condition="python:modules.previous"
                    tal:attributes="href string:${request.route_url('module_association')}?b_start=${previous_b_start}&workspace=${selected_workspace}">
                    « Previous <span tal:content="b_size">13</span>
                    items
                </a>
            </span>

            <span class="next">
                <a href="[url]?b_start=0"
                    tal:condition="python:modules.next"
                    tal:attributes="href string:${request.route_url('module_association')}?b_start=${b_start}&workspace=${selected_workspace}">
                    Next <span tal:content="b_size">13</span> items »
                </a>
            </span>

            <!-- list all the batches -->
            <tal:batch-list repeat="counter python:range(modules.total)">
            <a href="[url]?b_start=2"
                tal:condition="python:modules.index != counter"
                tal:define="b_start python:counter * modules.size"
                tal:attributes="href string:${request.route_url('module_association')}?b_start=${b_start}&workspace=${selected_workspace}"
                tal:content="counter +1">
                2
            </a>

            <span tal:condition="python:modules.index == counter">
                [<span tal:replace="counter +1">2</span>]
            </span>
            </tal:batch-list>
        </div>

        <table summary="Content listing" style="width: 100%; font-size: 1em;" class="listing" id="workarea-contents">
            <thead>
                <tr>
                    <th class="nosort">&nbsp;</th>
                    <th style="white-space: nowrap;"> Module title </th>
                    <th style="white-space: nowrap;"> Module ID </th>
                </tr>
            </thead>

            <tbody>
                <tr tal:repeat="details modules"
                    id="folder-contents-item-[uid]"
                    tal:attributes="id string:${details[0]}"
                    class="draggable odd">

                    <td style="text-align: center;" class="notDraggable checkCol">
                        <input type="radio" name="module"
                        value="/GroupWorkspaces/wg1438/m33469"
                        tal:attributes="value details[1]">
                    </td>

                    <td class="notDraggable">
                        <span class="visualIcon contenttype-module"
                            tal:content="details[2]">
                            Siyavula Connexions Training Manual for Educators
                        </span>
                        <a target="_blank" 
                            class="review-module-link" 
                            title="Open the published module in a new window"
                            href="http://cnx.org/content/m33469/latest/">
                            <img src="${images_url}/external-link.png">
                        </a>
                    </td>

                    <td class="notDraggable" tal:content="details[0]">
                        m33469
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Navigation -->
        <div class="listingBar">

            <span class="previous">
                <a href="[url]?b_start=0"
                    tal:condition="python:modules.previous"
                    tal:attributes="href string:${request.route_url('module_association')}?b_start=${previous_b_start}&workspace=${selected_workspace}">
                    « Previous <span tal:content="b_size">13</span>
                    items
                </a>
            </span>

            <span class="next">
                <a href="[url]?b_start=0"
                    tal:condition="python:modules.next"
                    tal:attributes="href string:${request.route_url('module_association')}?b_start=${b_start}&workspace=${selected_workspace}">
                    Next <span tal:content="b_size">13</span> items »
                </a>
            </span>

            <!-- list all the batches -->
            <tal:batch-list repeat="counter python:range(modules.total)">
            <a href="[url]?b_start=2"
                tal:condition="python:modules.index != counter"
                tal:define="b_start python:counter * modules.size"
                tal:attributes="href string:${request.route_url('module_association')}?b_start=${b_start}&workspace=${selected_workspace}"
                tal:content="counter +1">
                2
            </a>

            <span tal:condition="python:modules.index == counter">
                [<span tal:replace="counter +1">2</span>]
            </span>
            </tal:batch-list>
        </div>
    </div>
    
</tal:modules_list>
